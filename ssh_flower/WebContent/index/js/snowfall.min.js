var snowFall=function(){function e(){var e={flakeCount:35,flakeColor:"#ffffff",flakeIndex:999999,minSize:1,maxSize:2,minSpeed:1,maxSpeed:5,round:!1,shadow:!1,collection:!1,image:!1,collectionHeight:40},t={},s=[],n=0,o=0,a=0,l=0,h=0,f=0,r=0,d=function(e,t){for(var i in t)e.hasOwnProperty(i)&&(e[i]=t[i])},p=function(e,t){return Math.round(e+Math.random()*(t-e))},c=function(e,t){for(var i in t)e.style[i]=t[i]+("width"==i||"height"==i?"px":"")},m=function(t,i,s,n,r){this.id=r,this.x=t+h,this.y=i+l,this.size=s,this.speed=n,this.step=0,this.stepSize=p(1,10)/100,e.collection&&(this.target=canvasCollection[p(0,canvasCollection.length-1)]);var d=null;e.image?(d=new Image,d.src=e.image):(d=document.createElement("div"),c(d,{background:e.flakeColor})),d.className="snowfall-flakes",d.setAttribute("id","flake-"+this.id),c(d,{width:this.size,height:this.size,position:"absolute",top:this.y,left:this.x,fontSize:0,zIndex:e.flakeIndex}),e.round&&c(d,{"-moz-border-radius":~~e.maxSize+"px","-webkit-border-radius":~~e.maxSize+"px",borderRadius:~~e.maxSize+"px"}),e.shadow&&c(d,{"-moz-box-shadow":"1px 1px 1px #555","-webkit-box-shadow":"1px 1px 1px #555",boxShadow:"1px 1px 1px #555"}),document.body.appendChild(d),this.element=d,this.update=function(){this.y+=this.speed,this.y>l+o-(this.size+6)&&this.reset(),this.element.style.top=this.y+"px",this.element.style.left=~~this.x+"px",this.step+=this.stepSize,this.x+=Math.cos(this.step),(this.x>h+a-f||this.x<f)&&this.reset()},this.reset=function(){this.y=l,this.x=h+p(f,a-f),this.stepSize=p(1,10)/100,this.size=p(100*e.minSize,100*e.maxSize)/100,this.speed=p(e.minSpeed,e.maxSpeed)}},u=function(){for(var e=0;e<s.length;e+=1)s[e].update();r=requestAnimationFrame(function(){u()})};return{snow:function(r,c){for(d(e,c),t=r,o=t.clientHeight,a=t.offsetWidth,l=t.offsetTop,h=t.offsetLeft,t.snow=this,"body"===t.tagName.toLowerCase()&&(f=25),window.onresize=function(){o=t.clientHeight,a=t.offsetWidth,l=t.offsetTop,h=t.offsetLeft},i=0;i<e.flakeCount;i+=1)n=s.length,s.push(new m(p(f,a-f),p(0,o),p(100*e.minSize,100*e.maxSize)/100,p(e.minSpeed,e.maxSpeed),n));u()},clear:function(){var e=null;e=t.getElementsByClassName?t.getElementsByClassName("snowfall-flakes"):t.querySelectorAll(".snowfall-flakes");for(var i=e.length;i--;)t.removeChild(e[i]);s=[],cancelAnimationFrame(r)}}}return{snow:function(t,i){if("string"==typeof i)if(t.length>0)for(var s=0;s<t.length;s++)t[s].snow&&t[s].snow.clear();else t.snow.clear();else if(t.length>0)for(var s=0;s<t.length;s++)(new e).snow(t[s],i);else(new e).snow(t,i)}}}();